Fannie Mae, the nation's largest mortgage buyer, agreed to major changes in its accounting and management practices.