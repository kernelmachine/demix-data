J Sainsbury reported its first ever pretax loss after investing heavily in restructuring aimed at arresting a decline in its fortunes.