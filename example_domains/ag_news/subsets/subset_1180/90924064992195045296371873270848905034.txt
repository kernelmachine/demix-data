A curfew was imposed on Kathmandu last night, with orders to shoot people on sight, after thousands of demonstrators ransacked a mosque and fought pitched battles with police to protest at the killing of 12 Nepalese hostages by insurgents in Iraq.