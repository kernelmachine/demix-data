A powerful typhoon is battering parts of Japan and South Korea with heavy rains and high winds, killing at least two people and injuring more than 300.