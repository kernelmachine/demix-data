Defense Secretary Donald Rumsfeld said Sunday the United States and its allies were locked in a test of wills with insurgents in Iraq and must overcome the  quot;pain and ugliness quot; of the conflict.