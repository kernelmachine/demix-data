MADRID Spains cabinet proposed legislation Friday allowing same-sex marriages and for homosexuals to adopt children, pressing ahead with its liberal agenda despite vociferous opposition from the influential Roman Catholic Church.