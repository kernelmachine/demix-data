Iran and its European partners struggled to salvage their agreement committing Tehran to freeze an important part of its nuclear program.