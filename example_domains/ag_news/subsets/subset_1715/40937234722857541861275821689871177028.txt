A federal judge ruled that the provision broadly violated the Constitution by giving federal authorities unchecked powers to obtain private information.